[OUTPUT] Logging to: /home/ws/ugv_cont/mission/outputs/20251224_205510
[OUTPUT] Log file: /home/ws/ugv_cont/mission/outputs/20251224_205510/logs/navigation.log
=======================================================
NEXT-BEST-VIEW (NBV) NAVIGATION
=======================================================
Speed: 0.08 m/s
Goal distance: 0.5-2.0m
Press Ctrl+C to stop

[DEBUG] Marker publishing enabled - check /nav_goal in RViz
[MARKER] Persistent marker publisher started - add /nav_goal in RViz
[START] Initial position: (0.00, 0.00)
[START] Origin wall signature: ['0.62', '0.61', '0.61', '0.62', '0.62', '0.64', '0.66', '1.04', '0.98', '0.89', '0.82', '0.62', '0.59', '0.56', '0.54', '0.49', '0.52', '0.54', '0.53', '0.52', '0.61', '0.65', '0.70', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '0.76', '0.81', '1.76', '2.01', '3.75', '3.74', '5.14', '1.79', '1.79', '1.32', '1.33', '1.37', '1.42', '1.47', '0.96', '0.82', '0.77', '0.75', '0.69', '0.66', '0.64', '0.64']
[MARKER] Origin marker (blue) started at (0.00, 0.00) - add /nav_origin in RViz

[  3.5s] [GOAL SELECT] robot@(0.00,0.00) | 23 candidates (scanned=51 walls=20 visited=1):
  #1 ang=-107° d=2.00m pos=(0.73,1.86) score=+34.1 [O=+2.5 U=+32.0 V=-0.0 W=-1.0 R=-0.0 F=+0.0] <-- BEST
  #2 ang= -82° d=1.00m pos=(-0.06,1.00) score=+33.1 [O=+1.8 U=+32.0 V=-0.0 W=-1.0 R=-0.0 F=+0.0]
  #3 ang= -52° d=0.50m pos=(-0.28,0.42) score=+32.1 [O=+2.0 U=+36.0 V=-3.0 W=-3.0 R=-0.0 F=+0.0]
  #4 ang= -88° d=1.00m pos=(0.05,1.00) score=+31.1 [O=+1.8 U=+30.0 V=-0.0 W=-1.0 R=-0.0 F=+0.0]
  #5 ang=-101° d=1.50m pos=(0.39,1.45) score=+30.0 [O=+2.5 U=+28.0 V=-0.0 W=-1.0 R=-0.0 F=+0.0]
  #6 ang=-113° d=1.50m pos=(0.69,1.33) score=+27.0 [O=+1.5 U=+28.0 V=-0.0 W=-3.0 R=-0.0 F=+0.0]
  #7 ang=-107° d=1.50m pos=(0.54,1.40) score=+26.0 [O=+2.5 U=+24.0 V=-0.0 W=-1.0 R=-0.0 F=+0.0]
  #8 ang=-113° d=1.00m pos=(0.46,0.89) score=+25.5 [O=+2.0 U=+23.2 V=-0.0 W=-0.0 R=-0.0 F=+0.0]
[  3.5s] [GOAL] Selected: (0.73, 1.86) dist=2.00m timeout=50s angle=-107° reason=no goal
[  2] DRIVE goal=(0.73,1.86) dist=2.00m front=0.61m cells=1 rms=0.0cm[  3] DRIVE goal=(0.73,1.86) dist=2.00m front=0.61m cells=1 rms=0.3cm[  4] DRIVE goal=(0.73,1.86) dist=2.00m front=0.61m cells=1 rms=0.6cm[  5] DRIVE goal=(0.73,1.86) dist=2.01m front=0.61m cells=1 rms=1.1cm[  6] DRIVE goal=(0.73,1.86) dist=2.01m front=0.61m cells=1 rms=1.4cm[  7] DRIVE goal=(0.73,1.86) dist=2.01m front=0.60m cells=1 rms=1.5cm[  8] DRIVE goal=(0.73,1.86) dist=2.01m front=0.61m cells=1 rms=1.6cm[  9] DRIVE goal=(0.73,1.86) dist=2.00m front=0.61m cells=1 rms=1.5cm[ 10] DRIVE goal=(0.73,1.86) dist=1.99m front=0.62m cells=1 rms=1.6cm[ 11] DRIVE goal=(0.73,1.86) dist=1.99m front=0.62m cells=1 rms=1.7cm[ 12] DRIVE goal=(0.73,1.86) dist=1.99m front=0.63m cells=1 rms=1.9cm[ 13] DRIVE goal=(0.73,1.86) dist=1.99m front=0.63m cells=1 rms=2.0cm[ 14] DRIVE goal=(0.73,1.86) dist=1.99m front=0.62m cells=1 rms=2.0cm[ 15] DRIVE goal=(0.73,1.86) dist=1.99m front=0.62m cells=1 rms=1.9cm[ 16] DRIVE goal=(0.73,1.86) dist=2.00m front=0.62m cells=1 rms=1.8cm[ 17] DRIVE goal=(0.73,1.86) dist=2.00m front=0.65m cells=1 rms=1.8cm[ 18] DRIVE goal=(0.73,1.86) dist=1.99m front=0.65m cells=1 rms=1.8cm[ 19] DRIVE goal=(0.73,1.86) dist=1.99m front=0.64m cells=1 rms=1.7cm[ 20] DRIVE goal=(0.73,1.86) dist=1.99m front=0.64m cells=1 rms=1.7cm[ 21] DRIVE goal=(0.73,1.86) dist=1.98m front=0.64m cells=1 rms=1.8cm[ 22] DRIVE goal=(0.73,1.86) dist=1.99m front=0.66m cells=1 rms=1.8cm[ 23] DRIVE goal=(0.73,1.86) dist=1.99m front=0.67m cells=1 rms=1.7cm[ 24] DRIVE goal=(0.73,1.86) dist=1.99m front=0.69m cells=1 rms=1.7cm[ 25] DRIVE goal=(0.73,1.86) dist=1.99m front=0.69m cells=1 rms=1.7cm[ 26] DRIVE goal=(0.73,1.86) dist=1.99m front=0.70m cells=1 rms=1.7cm[ 27] DRIVE goal=(0.73,1.86) dist=1.99m front=0.72m cells=1 rms=1.7cm[ 28] DRIVE goal=(0.73,1.86) dist=1.99m front=0.73m cells=1 rms=1.7cm[ 29] DRIVE goal=(0.73,1.86) dist=1.98m front=0.74m cells=1 rms=1.8cm[ 30] DRIVE goal=(0.73,1.86) dist=1.98m front=0.74m cells=1 rms=1.8cm[ 31] DRIVE goal=(0.73,1.86) dist=1.98m front=0.74m cells=1 rms=1.8cm[ 32] DRIVE goal=(0.73,1.86) dist=1.97m front=0.74m cells=1 rms=1.9cm[ 33] DRIVE goal=(0.73,1.86) dist=1.96m front=0.76m cells=1 rms=2.1cm[ 34] DRIVE goal=(0.73,1.86) dist=1.97m front=0.79m cells=1 rms=2.2cm[ 35] DRIVE goal=(0.73,1.86) dist=1.97m front=0.80m cells=1 rms=2.3cm[ 36] DRIVE goal=(0.73,1.86) dist=1.96m front=0.91m cells=1 rms=2.4cm[ 37] DRIVE goal=(0.73,1.86) dist=1.97m front=0.96m cells=1 rms=2.5cm[ 38] DRIVE goal=(0.73,1.86) dist=1.98m front=1.27m cells=1 rms=2.6cm
[ 11.2s] [TURN ENTER] Entering TURN mode

[BLOCKED DEBUG] Goal angle: -30.9° (sector 54), goal_dist: 1.99m, goal_dir_min: 1.69m, margin: 0.15m
[BLOCKED DEBUG] Checking 1 sectors (robot angular width at 2.0m = 5.2°): {54: 1.691}
[BLOCKED DEBUG] Check: 1.69 < 1.99 - 0.15 = 1.84? True
[BLOCKED DEBUG] (Full front arc for reference: {55: 1.89, 56: 3.712, 57: 3.693, 58: 5.033, 59: 1.754, 0: 1.756, 1: 1.28, 2: 1.287, 3: 1.316, 4: 1.355, 5: 1.423})

[BLOCKED TURN] goal_sector=54, best_sector=54 (dist=1.69m), target_angle=-36.0°, angle_error=-36.0°, v=0.00, w=-0.50
[ 39] TURN goal=(0.73,1.86) dist=1.99m front=1.28m cells=1 rms=2.6cm[ 40] DRIVE goal=(0.73,1.86) dist=1.98m front=1.28m cells=1 rms=2.6cm
[ 11.6s] [TURN ENTER] Entering TURN mode

[BLOCKED DEBUG] Goal angle: -18.6° (sector 56), goal_dist: 1.97m, goal_dir_min: 1.66m, margin: 0.15m
[BLOCKED DEBUG] Checking 1 sectors (robot angular width at 2.0m = 5.2°): {56: 1.659}
[BLOCKED DEBUG] Check: 1.66 < 1.97 - 0.15 = 1.82? True
[BLOCKED DEBUG] (Full front arc for reference: {55: 0.751, 56: 1.659, 57: 1.916, 58: 3.704, 59: 3.681, 0: 5.444, 1: 1.745, 2: 1.749, 3: 1.277, 4: 1.282, 5: 1.31})

[BLOCKED TURN] goal_sector=56, best_sector=56 (dist=1.66m), target_angle=-24.0°, angle_error=-24.0°, v=0.00, w=-0.50
[ 41] TURN goal=(0.73,1.86) dist=1.97m front=0.75m cells=1 rms=2.7cm[ 42] TURN goal=(0.73,1.86) dist=1.98m front=0.67m cells=1 rms=2.7cm[ 43] DRIVE goal=(0.73,1.86) dist=1.96m front=0.66m cells=1 rms=2.7cm
[ 12.2s] [TURN ENTER] Entering TURN mode

[BLOCKED DEBUG] Goal angle: -8.3° (sector 58), goal_dist: 1.94m, goal_dir_min: 1.71m, margin: 0.15m
[BLOCKED DEBUG] Checking 1 sectors (robot angular width at 1.9m = 5.3°): {58: 1.709}
[BLOCKED DEBUG] Check: 1.71 < 1.94 - 0.15 = 1.79? True
[BLOCKED DEBUG] (Full front arc for reference: {55: 0.606, 56: 0.673, 57: 1.528, 58: 1.709, 59: 1.957, 0: 3.697, 1: 3.673, 2: 5.447, 3: 1.743, 4: 1.747, 5: 1.273})

[BLOCKED TURN] goal_sector=58, best_sector=58 (dist=1.71m), target_angle=-12.0°, angle_error=-12.0°, v=0.00, w=-0.31
[ 44] TURN goal=(0.73,1.86) dist=1.94m front=0.61m cells=1 rms=2.8cm[ 45] TURN goal=(0.73,1.86) dist=1.91m front=0.53m cells=1 rms=2.9cm[ 46] TURN goal=(0.73,1.86) dist=1.91m front=0.52m cells=1 rms=2.9cm[ 47] DRIVE goal=(0.73,1.86) dist=1.91m front=0.52m cells=1 rms=3.0cm[ 48] DRIVE goal=(0.73,1.86) dist=1.89m front=0.52m cells=1 rms=3.0cm[ 49] DRIVE goal=(0.73,1.86) dist=1.82m front=0.52m cells=1 rms=3.1cm[ 50] DRIVE goal=(0.73,1.86) dist=1.76m front=0.51m cells=1 rms=3.1cm[ 51] DRIVE goal=(0.73,1.86) dist=1.71m front=0.50m cells=1 rms=3.1cm[ 52] DRIVE goal=(0.73,1.86) dist=1.66m front=0.50m cells=2 rms=3.1cm[ 53] DRIVE goal=(0.73,1.86) dist=1.59m front=0.48m cells=2 rms=3.1cm[ 54] DRIVE goal=(0.73,1.86) dist=1.55m front=0.48m cells=2 rms=3.1cm[ 55] DRIVE goal=(0.73,1.86) dist=1.47m front=0.49m cells=2 rms=3.0cm[ 56] DRIVE goal=(0.73,1.86) dist=1.42m front=0.49m cells=2 rms=3.0cm[ 57] DRIVE goal=(0.73,1.86) dist=1.36m front=0.52m cells=3 rms=3.0cm[ 58] DRIVE goal=(0.73,1.86) dist=1.31m front=1.08m cells=3 rms=3.0cm[ 59] DRIVE goal=(0.73,1.86) dist=1.22m front=1.06m cells=3 rms=3.0cm[ 60] DRIVE goal=(0.73,1.86) dist=1.15m front=1.03m cells=3 rms=3.0cm[ 61] DRIVE goal=(0.73,1.86) dist=1.12m front=1.19m cells=3 rms=3.0cm[ 62] DRIVE goal=(0.73,1.86) dist=1.11m front=1.17m cells=3 rms=3.0cm[ 63] DRIVE goal=(0.73,1.86) dist=1.07m front=1.15m cells=3 rms=3.1cm[ 64] DRIVE goal=(0.73,1.86) dist=1.02m front=1.16m cells=4 rms=3.1cm[ 65] DRIVE goal=(0.73,1.86) dist=0.97m front=1.13m cells=4 rms=3.1cm[ 66] DRIVE goal=(0.73,1.86) dist=0.91m front=1.13m cells=4 rms=3.2cm[ 67] DRIVE goal=(0.73,1.86) dist=0.87m front=1.09m cells=4 rms=3.3cm[ 68] DRIVE goal=(0.73,1.86) dist=0.81m front=1.11m cells=4 rms=3.3cm[ 69] DRIVE goal=(0.73,1.86) dist=0.75m front=1.13m cells=4 rms=3.4cm[ 70] DRIVE goal=(0.73,1.86) dist=0.72m front=1.09m cells=5 rms=3.4cm[ 71] DRIVE goal=(0.73,1.86) dist=0.66m front=1.15m cells=5 rms=3.5cm[ 72] DRIVE goal=(0.73,1.86) dist=0.59m front=1.14m cells=5 rms=3.6cm[ 73] DRIVE goal=(0.73,1.86) dist=0.56m front=1.09m cells=5 rms=3.7cm[ 74] DRIVE goal=(0.73,1.86) dist=0.55m front=1.09m cells=5 rms=3.8cm[ 75] DRIVE goal=(0.73,1.86) dist=0.53m front=1.06m cells=5 rms=3.9cm[ 76] DRIVE goal=(0.73,1.86) dist=0.52m front=1.00m cells=5 rms=4.0cm[ 77] DRIVE goal=(0.73,1.86) dist=0.51m front=1.00m cells=5 rms=4.1cm[ 78] DRIVE goal=(0.73,1.86) dist=0.51m front=1.00m cells=5 rms=4.2cm[ 79] DRIVE goal=(0.73,1.86) dist=0.49m front=1.00m cells=5 rms=4.3cm[ 80] DRIVE goal=(0.73,1.86) dist=0.45m front=0.99m cells=5 rms=4.4cm
[ 19.8s] [GOAL SELECT] robot@(0.52,1.55) | 8 candidates (scanned=114 walls=72 visited=6):
  #1 ang=  +9° d=2.00m pos=(1.10,3.47) score=+49.8 [O=+2.2 U=+32.0 V=-0.0 W=-0.0 R=-0.0 F=+15.0] <-- BEST
  #2 ang=  +9° d=1.50m pos=(0.95,2.99) score=+40.9 [O=+2.5 U=+24.0 V=-0.0 W=-1.0 R=-0.0 F=+15.0]
  #3 ang= -21° d=0.50m pos=(0.89,1.89) score=+22.1 [O=+1.5 U=+24.2 V=-3.0 W=-3.0 R=-10.9 F=+13.2]
  #4 ang= -15° d=0.50m pos=(0.85,1.93) score=+9.0 [O=+1.6 U=+20.3 V=-3.0 W=-3.0 R=-10.9 F=+13.8 T=-10.0]
  #5 ang=  +3° d=0.50m pos=(0.72,2.01) score=+0.1 [O=+1.9 U=+10.0 V=-3.0 W=-3.0 R=-10.9 F=+15.0 T=-10.0]
  #6 ang=  -3° d=0.50m pos=(0.76,1.99) score=-0.1 [O=+1.8 U=+10.2 V=-3.0 W=-3.0 R=-10.9 F=+14.8 T=-10.0]
  #7 ang=  -9° d=0.50m pos=(0.81,1.96) score=-0.6 [O=+1.7 U=+10.2 V=-3.0 W=-3.0 R=-10.9 F=+14.4 T=-10.0]
  #8 ang=  +9° d=0.50m pos=(0.67,2.03) score=-1.3 [O=+2.5 U=+8.0 V=-3.0 W=-3.0 R=-10.9 F=+15.0 T=-10.0]
[ 19.8s] [GOAL] Selected: (1.10, 3.47) dist=2.00m timeout=50s angle=9° reason=reached
[ 81] DRIVE goal=(1.10,3.47) dist=2.00m front=0.98m cells=6 rms=4.4cm[ 82] DRIVE goal=(1.10,3.47) dist=1.93m front=0.96m cells=6 rms=4.3cm[ 83] DRIVE goal=(1.10,3.47) dist=1.83m front=0.93m cells=6 rms=4.3cmWaiting for LiDAR...


Stopping (Ctrl+C)...
[MARKER] Publisher stopped

=======================================================
NBV NAVIGATION COMPLETE
=======================================================
Final state: exploring
Duration: 21.3s
Iterations: 84
Goals reached: 1
Backups: 0
Unique cells visited: 6
Cells scanned by LiDAR: 117
Walls detected: 75

--- Drive Accuracy ---
Cross-track RMS error: 4.3cm
Total distance traveled: 2.17m
Ideal distance (sum of goals): 4.00m
Drive efficiency: 184.4%
Revisit rate: 100.0%

--- Map Accuracy Suggestions ---
To measure map accuracy, consider:
1. Ground truth comparison: Place markers at known positions,
   compare measured vs actual distances between them
2. Loop closure error: After returning to origin, check
   odometry drift (final_dist to origin should be ~0)
3. Feature alignment: Compare map walls to actual room layout
4. Consistency check: Run multiple times, overlay maps
5. Tape measure validation: Measure actual room dimensions,
   compare to map scale (resolution * pixels)
