[OUTPUT] Logging to: /home/ws/ugv_cont/mission/outputs/20251224_204812
[OUTPUT] Log file: /home/ws/ugv_cont/mission/outputs/20251224_204812/logs/navigation.log
=======================================================
NEXT-BEST-VIEW (NBV) NAVIGATION
=======================================================
Speed: 0.08 m/s
Goal distance: 0.5-2.0m
Press Ctrl+C to stop

[DEBUG] Marker publishing enabled - check /nav_goal in RViz
[MARKER] Persistent marker publisher started - add /nav_goal in RViz
[START] Initial position: (0.00, 0.00)
[START] Origin wall signature: ['0.61', '0.60', '0.59', '0.59', '0.59', '0.60', '0.62', '0.64', '1.02', '0.97', '0.88', '0.82', '0.61', '0.58', '0.55', '0.51', '0.48', '0.49', '0.53', '0.55', '0.52', '0.54', '0.64', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '5.00', '0.74', '0.77', '0.84', '1.75', '2.00', '3.76', '3.75', '5.07', '1.80', '1.33', '1.32', '1.34', '1.36', '1.42', '1.48', '0.93', '0.81', '0.76', '0.73', '0.67', '0.63', '0.63']
[MARKER] Origin marker (blue) started at (0.00, 0.00) - add /nav_origin in RViz

[  2.5s] [GOAL SELECT] robot@(0.00,0.00) | 18 candidates (scanned=53 walls=24 visited=1):
  #1 ang=-101° d=2.00m pos=(0.49,1.94) score=+36.1 [O=+2.5 U=+34.0 V=-0.0 W=-1.0 R=-0.0 F=+0.0] <-- BEST
  #2 ang= -52° d=0.50m pos=(-0.29,0.41) score=+32.1 [O=+1.9 U=+36.0 V=-3.0 W=-3.0 R=-0.0 F=+0.0]
  #3 ang=-101° d=1.50m pos=(0.37,1.45) score=+28.0 [O=+2.5 U=+26.0 V=-0.0 W=-1.0 R=-0.0 F=+0.0]
  #4 ang= -82° d=1.00m pos=(-0.07,1.00) score=+23.1 [O=+1.8 U=+24.0 V=-0.0 W=-3.0 R=-0.0 F=+0.0]
  #5 ang= -88° d=1.00m pos=(0.03,1.00) score=+21.8 [O=+2.5 U=+22.0 V=-0.0 W=-3.0 R=-0.0 F=+0.0]
  #6 ang=-107° d=1.00m pos=(0.35,0.94) score=+21.3 [O=+2.0 U=+20.0 V=-0.0 W=-1.0 R=-0.0 F=+0.0]
  #7 ang= -58° d=0.50m pos=(-0.24,0.44) score=+20.0 [O=+1.9 U=+34.0 V=-3.0 W=-3.0 R=-0.0 F=+0.0 T=-10.0]
  #8 ang= -64° d=0.50m pos=(-0.19,0.46) score=+20.0 [O=+1.8 U=+34.0 V=-3.0 W=-3.0 R=-0.0 F=+0.0 T=-10.0]
[  2.5s] [GOAL] Selected: (0.49, 1.94) dist=2.00m timeout=50s angle=-101° reason=no goal
[  1] DRIVE goal=(0.49,1.94) dist=2.00m front=0.59m cells=1 rms=0.0cm[  2] DRIVE goal=(0.49,1.94) dist=2.00m front=0.59m cells=1 rms=0.0cm[  3] DRIVE goal=(0.49,1.94) dist=2.00m front=0.59m cells=1 rms=0.3cm[  4] DRIVE goal=(0.49,1.94) dist=2.00m front=0.59m cells=1 rms=1.0cm[  5] DRIVE goal=(0.49,1.94) dist=2.01m front=0.59m cells=1 rms=2.0cm[  6] DRIVE goal=(0.49,1.94) dist=2.01m front=0.58m cells=1 rms=3.0cm[  7] DRIVE goal=(0.49,1.94) dist=2.01m front=0.58m cells=1 rms=3.2cm[  8] DRIVE goal=(0.49,1.94) dist=2.01m front=0.60m cells=1 rms=3.5cm[  9] DRIVE goal=(0.49,1.94) dist=2.01m front=0.60m cells=1 rms=3.7cm[ 10] DRIVE goal=(0.49,1.94) dist=2.01m front=0.62m cells=1 rms=3.7cm[ 11] DRIVE goal=(0.49,1.94) dist=2.01m front=0.62m cells=1 rms=3.8cm[ 12] DRIVE goal=(0.49,1.94) dist=2.02m front=0.62m cells=1 rms=3.7cm[ 13] DRIVE goal=(0.49,1.94) dist=2.02m front=0.62m cells=1 rms=3.6cm[ 14] DRIVE goal=(0.49,1.94) dist=2.02m front=0.62m cells=1 rms=3.6cm[ 15] DRIVE goal=(0.49,1.94) dist=2.02m front=0.62m cells=1 rms=3.6cm[ 16] DRIVE goal=(0.49,1.94) dist=2.01m front=0.62m cells=1 rms=3.7cm[ 17] DRIVE goal=(0.49,1.94) dist=2.01m front=0.62m cells=1 rms=3.7cm[ 18] DRIVE goal=(0.49,1.94) dist=2.01m front=0.62m cells=1 rms=3.8cm[ 19] DRIVE goal=(0.49,1.94) dist=2.01m front=0.62m cells=1 rms=3.9cm[ 20] DRIVE goal=(0.49,1.94) dist=2.01m front=0.62m cells=1 rms=3.9cm[ 21] DRIVE goal=(0.49,1.94) dist=2.02m front=0.65m cells=1 rms=3.8cm[ 22] DRIVE goal=(0.49,1.94) dist=2.02m front=0.68m cells=1 rms=3.8cm[ 23] DRIVE goal=(0.49,1.94) dist=2.02m front=0.68m cells=1 rms=3.7cm[ 24] DRIVE goal=(0.49,1.94) dist=2.02m front=0.67m cells=1 rms=3.7cm[ 25] DRIVE goal=(0.49,1.94) dist=2.02m front=0.67m cells=1 rms=3.7cm[ 26] DRIVE goal=(0.49,1.94) dist=2.02m front=0.68m cells=1 rms=3.6cm[ 27] DRIVE goal=(0.49,1.94) dist=2.02m front=0.69m cells=1 rms=3.6cm[ 28] DRIVE goal=(0.49,1.94) dist=2.02m front=0.73m cells=1 rms=3.6cm[ 29] DRIVE goal=(0.49,1.94) dist=2.02m front=0.73m cells=1 rms=3.6cm[ 30] DRIVE goal=(0.49,1.94) dist=2.01m front=0.74m cells=1 rms=3.6cm[ 31] DRIVE goal=(0.49,1.94) dist=2.01m front=0.74m cells=1 rms=3.6cm[ 32] DRIVE goal=(0.49,1.94) dist=2.02m front=0.76m cells=1 rms=3.5cm[ 33] DRIVE goal=(0.49,1.94) dist=2.02m front=0.77m cells=1 rms=3.5cm[ 34] DRIVE goal=(0.49,1.94) dist=2.01m front=0.79m cells=1 rms=3.5cm[ 35] DRIVE goal=(0.49,1.94) dist=2.02m front=0.81m cells=1 rms=3.5cm[ 36] DRIVE goal=(0.49,1.94) dist=2.04m front=1.00m cells=1 rms=3.5cm[ 37] DRIVE goal=(0.49,1.94) dist=2.04m front=1.32m cells=1 rms=3.4cm
[ 10.3s] [TURN ENTER] Entering TURN mode

[BLOCKED DEBUG] Goal angle: -26.2° (sector 55), goal_dist: 2.03m, goal_dir_min: 1.81m, margin: 0.15m
[BLOCKED DEBUG] Checking 1 sectors (robot angular width at 2.0m = 5.1°): {55: 1.808}
[BLOCKED DEBUG] Check: 1.81 < 2.03 - 0.15 = 1.88? True
[BLOCKED DEBUG] (Full front arc for reference: {55: 1.808, 56: 2.056, 57: 3.73, 58: 3.764, 59: 1.8, 0: 1.794, 1: 1.318, 2: 1.317, 3: 1.339, 4: 1.378, 5: 1.431})

[BLOCKED TURN] goal_sector=55, best_sector=55 (dist=1.81m), target_angle=-30.0°, angle_error=-30.0°, v=0.00, w=-0.50
[ 38] TURN goal=(0.49,1.94) dist=2.03m front=1.32m cells=1 rms=3.4cm[ 39] TURN goal=(0.49,1.94) dist=2.02m front=1.31m cells=1 rms=3.3cm[ 40] TURN goal=(0.49,1.94) dist=2.05m front=0.75m cells=1 rms=3.3cm[ 41] TURN goal=(0.49,1.94) dist=2.05m front=0.70m cells=1 rms=3.3cm[ 42] DRIVE goal=(0.49,1.94) dist=2.04m front=0.68m cells=1 rms=3.2cm
[ 11.3s] [TURN ENTER] Entering TURN mode

[BLOCKED DEBUG] Goal angle: -1.6° (sector 59), goal_dist: 2.03m, goal_dir_min: 1.73m, margin: 0.15m
[BLOCKED DEBUG] Checking 1 sectors (robot angular width at 2.0m = 5.1°): {59: 1.725}
[BLOCKED DEBUG] Check: 1.73 < 2.03 - 0.15 = 1.88? True
[BLOCKED DEBUG] (Full front arc for reference: {55: 0.65, 56: 0.68, 57: 0.725, 58: 0.794, 59: 1.725, 0: 1.999, 1: 3.743, 2: 3.731, 3: 5.245, 4: 1.793, 5: 1.795})

[BLOCKED TURN] goal_sector=59, best_sector=59 (dist=1.73m), target_angle=-6.0°, angle_error=-6.0°, v=0.05, w=-0.16
[ 43] TURN goal=(0.49,1.94) dist=2.03m front=0.65m cells=1 rms=3.2cm[ 44] TURN goal=(0.49,1.94) dist=2.02m front=0.64m cells=1 rms=3.2cm[ 45] DRIVE goal=(0.49,1.94) dist=1.94m front=0.64m cells=1 rms=3.1cm
[ 11.9s] [TURN ENTER] Entering TURN mode

[BLOCKED DEBUG] Goal angle: 1.8° (sector 0), goal_dist: 1.90m, goal_dir_min: 1.75m, margin: 0.15m
[BLOCKED DEBUG] Checking 1 sectors (robot angular width at 1.9m = 5.4°): {0: 1.747}
[BLOCKED DEBUG] Check: 1.75 < 1.90 - 0.15 = 1.75? True
[BLOCKED DEBUG] (Full front arc for reference: {55: 0.608, 56: 0.634, 57: 0.667, 58: 0.715, 59: 0.777, 0: 1.747, 1: 2.004, 2: 3.686, 3: 3.706, 4: 5.436, 5: 1.754})

[BLOCKED TURN] goal_sector=0, best_sector=0 (dist=1.75m), target_angle=0.0°, angle_error=0.0°, v=0.05, w=0.00
[ 46] TURN goal=(0.49,1.94) dist=1.90m front=0.61m cells=1 rms=3.1cm[ 47] TURN goal=(0.49,1.94) dist=1.87m front=0.60m cells=1 rms=3.1cm[ 48] DRIVE goal=(0.49,1.94) dist=1.85m front=0.59m cells=1 rms=3.0cm[ 49] DRIVE goal=(0.49,1.94) dist=1.78m front=0.58m cells=1 rms=3.0cm[ 50] DRIVE goal=(0.49,1.94) dist=1.72m front=0.56m cells=1 rms=3.0cm[ 51] DRIVE goal=(0.49,1.94) dist=1.64m front=0.54m cells=2 rms=3.0cm[ 52] DRIVE goal=(0.49,1.94) dist=1.56m front=0.52m cells=2 rms=3.0cm[ 53] DRIVE goal=(0.49,1.94) dist=1.55m front=0.52m cells=2 rms=3.1cm[ 54] DRIVE goal=(0.49,1.94) dist=1.53m front=0.52m cells=2 rms=3.1cm[ 55] DRIVE goal=(0.49,1.94) dist=1.50m front=0.50m cells=2 rms=3.1cm[ 56] DRIVE goal=(0.49,1.94) dist=1.48m front=0.49m cells=2 rms=3.2cm[ 57] DRIVE goal=(0.49,1.94) dist=1.46m front=0.49m cells=2 rms=3.3cm[ 58] DRIVE goal=(0.49,1.94) dist=1.44m front=0.49m cells=2 rms=3.4cm[ 59] DRIVE goal=(0.49,1.94) dist=1.41m front=0.49m cells=2 rms=3.5cm[ 60] DRIVE goal=(0.49,1.94) dist=1.39m front=0.48m cells=2 rms=3.6cm[ 61] DRIVE goal=(0.49,1.94) dist=1.37m front=0.49m cells=2 rms=3.7cm[ 62] DRIVE goal=(0.49,1.94) dist=1.34m front=0.49m cells=3 rms=3.8cm[ 63] DRIVE goal=(0.49,1.94) dist=1.32m front=0.49m cells=3 rms=3.9cm[ 64] DRIVE goal=(0.49,1.94) dist=1.29m front=0.49m cells=3 rms=4.1cm[ 65] DRIVE goal=(0.49,1.94) dist=1.25m front=0.49m cells=3 rms=4.2cm[ 66] DRIVE goal=(0.49,1.94) dist=1.19m front=0.50m cells=3 rms=4.3cm[ 67] DRIVE goal=(0.49,1.94) dist=1.14m front=0.49m cells=3 rms=4.4cm[ 68] DRIVE goal=(0.49,1.94) dist=1.09m front=0.48m cells=4 rms=4.5cm[ 69] DRIVE goal=(0.49,1.94) dist=1.03m front=0.48m cells=5 rms=4.6cm[ 70] DRIVE goal=(0.49,1.94) dist=0.98m front=0.48m cells=5 rms=4.7cm[ 71] DRIVE goal=(0.49,1.94) dist=0.92m front=0.45m cells=5 rms=4.8cm[ 72] DRIVE goal=(0.49,1.94) dist=0.87m front=1.11m cells=5 rms=4.8cm[ 73] DRIVE goal=(0.49,1.94) dist=0.82m front=1.11m cells=5 rms=4.9cm[ 74] DRIVE goal=(0.49,1.94) dist=0.76m front=1.10m cells=5 rms=4.9cm[ 75] DRIVE goal=(0.49,1.94) dist=0.71m front=1.10m cells=6 rms=5.0cm[ 76] DRIVE goal=(0.49,1.94) dist=0.65m front=1.09m cells=6 rms=5.0cm[ 77] DRIVE goal=(0.49,1.94) dist=0.60m front=1.10m cells=6 rms=5.0cm[ 78] DRIVE goal=(0.49,1.94) dist=0.54m front=1.09m cells=6 rms=5.0cm[ 79] DRIVE goal=(0.49,1.94) dist=0.49m front=1.08m cells=6 rms=5.0cm[ 80] DRIVE goal=(0.49,1.94) dist=0.44m front=1.10m cells=7 rms=5.0cm
[ 18.9s] [GOAL SELECT] robot@(0.43,1.55) | 9 candidates (scanned=107 walls=72 visited=7):
  #1 ang=  -3° d=2.00m pos=(0.83,3.51) score=+49.8 [O=+2.2 U=+32.0 V=-0.0 W=-0.0 R=-0.0 F=+15.0] <-- BEST
  #2 ang=  -3° d=1.50m pos=(0.73,3.02) score=+40.9 [O=+2.5 U=+24.0 V=-0.0 W=-1.0 R=-0.0 F=+15.0]
  #3 ang=  -3° d=1.00m pos=(0.63,2.53) score=+30.8 [O=+2.5 U=+16.0 V=-0.0 W=-3.0 R=-0.0 F=+15.0]
  #4 ang= +21° d=0.50m pos=(0.32,2.04) score=+15.3 [O=+2.5 U=+26.3 V=-3.0 W=-3.0 R=-10.9 F=+13.2 T=-10.0]
  #5 ang= +15° d=0.50m pos=(0.37,2.05) score=+12.0 [O=+2.5 U=+22.3 V=-3.0 W=-3.0 R=-10.9 F=+13.9 T=-10.0]
  #6 ang=  +3° d=0.50m pos=(0.48,2.05) score=+2.7 [O=+2.5 U=+12.2 V=-3.0 W=-3.0 R=-10.9 F=+14.8 T=-10.0]
  #7 ang=  +9° d=0.50m pos=(0.42,2.05) score=+2.3 [O=+2.5 U=+12.2 V=-3.0 W=-3.0 R=-10.9 F=+14.4 T=-10.0]
  #8 ang=  -9° d=0.50m pos=(0.58,2.03) score=+0.2 [O=+1.9 U=+10.0 V=-3.0 W=-3.0 R=-10.9 F=+15.0 T=-10.0]
[ 18.9s] [GOAL] Selected: (0.83, 3.51) dist=2.00m timeout=50s angle=-3° reason=reached
[ 81] DRIVE goal=(0.83,3.51) dist=2.00m front=1.07m cells=7 rms=5.0cm[ 82] DRIVE goal=(0.83,3.51) dist=1.94m front=1.08m cells=7 rms=5.0cm[ 83] DRIVE goal=(0.83,3.51) dist=1.89m front=1.07m cells=7 rms=4.9cm[ 84] DRIVE goal=(0.83,3.51) dist=1.84m front=1.06m cells=7 rms=4.9cm[ 85] DRIVE goal=(0.83,3.51) dist=1.78m front=1.05m cells=7 rms=4.9cm[ 86] DRIVE goal=(0.83,3.51) dist=1.71m front=1.04m cells=8 rms=4.8cm[ 87] DRIVE goal=(0.83,3.51) dist=1.65m front=1.03m cells=8 rms=4.8cm[ 88] DRIVE goal=(0.83,3.51) dist=1.59m front=1.00m cells=8 rms=4.8cm[ 89] DRIVE goal=(0.83,3.51) dist=1.53m front=1.03m cells=8 rms=4.8cm[ 90] DRIVE goal=(0.83,3.51) dist=1.44m front=0.99m cells=9 rms=4.8cm[ 91] DRIVE goal=(0.83,3.51) dist=1.38m front=0.95m cells=9 rms=4.8cm[ 92] DRIVE goal=(0.83,3.51) dist=1.35m front=0.91m cells=9 rms=4.8cm[ 93] DRIVE goal=(0.83,3.51) dist=1.27m front=0.93m cells=9 rms=4.7cm[ 94] DRIVE goal=(0.83,3.51) dist=1.25m front=0.88m cells=9 rms=4.7cmWaiting for LiDAR...


Stopping (Ctrl+C)...
[MARKER] Publisher stopped

=======================================================
NBV NAVIGATION COMPLETE
=======================================================
Final state: exploring
Duration: 22.3s
Iterations: 95
Goals reached: 1
Backups: 0
Unique cells visited: 9
Cells scanned by LiDAR: 125
Walls detected: 92

--- Drive Accuracy ---
Cross-track RMS error: 4.7cm
Total distance traveled: 2.74m
Ideal distance (sum of goals): 4.00m
Drive efficiency: 146.2%
Revisit rate: 100.0%

--- Map Accuracy Suggestions ---
To measure map accuracy, consider:
1. Ground truth comparison: Place markers at known positions,
   compare measured vs actual distances between them
2. Loop closure error: After returning to origin, check
   odometry drift (final_dist to origin should be ~0)
3. Feature alignment: Compare map walls to actual room layout
4. Consistency check: Run multiple times, overlay maps
5. Tape measure validation: Measure actual room dimensions,
   compare to map scale (resolution * pixels)
